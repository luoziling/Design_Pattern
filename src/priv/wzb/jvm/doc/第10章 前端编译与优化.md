# 第10章 前端编译与优化

> 从计算机程序出现的第一天起，对效率的追逐就是程序员天生的坚定信仰，这个过程犹如一场没 有终点、永不停歇的F1方程式竞赛，程序员是车手，技术平台则是在赛道上飞驰的赛车。

## 10.1 概述

Java编译器分为三种

- 前端编译器
  - 把\*.java文件转变成*.class文件的过程
  - JDK的Javac、Eclipse JDT中的增量式编译器（ECJ）
- 即时编译器
  - （常称JIT编译器，Just In Time Compiler）运行期把字节码转变成本地机器 码的过程
  - HotSpot虚拟机的C1、C2编译器，Graal编译器。
- 提前编译器
  - （常称AOT编译器，Ahead Of Time Compiler）直接把程 序编译成与目标机器指令集相关的二进制代码的过程。
  - JDK的Jaotc、GNU Compiler for the Java（GCJ）、Excelsior JET

- 本章仅讨论前端编译器
- 代码优化从前端编译器迁移到后端编译器让其他语言（如JRuby、Groovy等语言）产生的class文件也能享受到优化福利
- 前端编译器可简化复杂度，提高编码效率

## 10.2 Javac编译器

javac过程

- 准备
  - 初始化插入式注解处理器
- 解析与填充符号表
  - 词法、语法分析。将源代码的字符流转变为标记集合，构造出抽象语法树。
  - 填充符号表。产生符号地址和符号信息。
- 插入式注解处理器的注解处理过程：插入式注解处理器的执行阶段，本章的实战部分会设计一 个插入式注解处理器来影响Javac的编译行为。
- 分析与字节码生成过程，包括：
  - 标注检查。对语法的静态信息进行检查。
  - 数据流及控制流分析。对程序动态运行过程进行检查。
  - 解语法糖。将简化代码编写的语法糖还原为原有的形式。
  - 字节码生成。将前面各个步骤所生成的信息转化成字节码。
- 

![image-20210929165147474](第10章 前端编译与优化.assets/image-20210929165147474.png)
